<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Vorel - FRC Match Schedule & Results Tracker | Real-time Robot Competition Data</title>
  
  <!-- Enhanced Meta Tags -->
  <meta name="description" content="Track FRC match schedules, rankings, and results in real-time. The ultimate companion for FIRST Robotics Competition teams with live updates from FIRST Nexus and The Blue Alliance.">
  <meta name="keywords" content="FRC, FIRST Robotics Competition, match schedule, team rankings, real-time results, robotics competition tracker">
  <meta name="robots" content="index, follow">
  <meta name="author" content="1334 Robotics">
  
  <!-- Open Graph with improved descriptions -->
  <meta property="og:type" content="website">
  <meta property="og:url" content="https://vorel.app">
  <meta property="og:title" content="Vorel - Real-time FRC Match Schedule & Results Tracker">
  <meta property="og:description" content="Track your FRC team's competition journey with live match updates, detailed results, and ranking points. The essential tool for FIRST Robotics Competition teams.">
  <meta property="og:image" content="https://vorel.app/banner-social3.avif">

  <!-- Twitter with improved descriptions -->
  <meta name="twitter:card" content="summary_large_image">
  <meta name="twitter:url" content="https://vorel.app">
  <meta name="twitter:title" content="Vorel - Real-time FRC Match Schedule & Results Tracker">
  <meta name="twitter:description" content="Track your FRC team's competition journey with live match updates, detailed results, and ranking points. The essential tool for FIRST Robotics Competition teams.">
  <meta name="twitter:image" content="https://vorel.app/banner-social3.avif">

  <!-- Web App Stuff -->
  <link rel="manifest" href="/manifest.json">
  <meta name="theme-color" content="#333333">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Vorel">
  <link rel="apple-touch-icon" href="/icon-192.png">

  <!-- Schema.org structured data for rich results -->
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "SoftwareApplication",
      "name": "Vorel",
      "applicationCategory": "SportsApplication",
      "operatingSystem": "Web",
      "url": "https://vorel.app",
      "description": "Vorel.app is the ultimate companion for FIRST Robotics Competition teams, providing real-time match schedules, statuses, results, and team rankings through FIRST Nexus and The Blue Alliance APIs.",
      "creator": {
        "@type": "Organization",
        "name": "1334 Robotics",
        "url": "https://github.com/1334Robotics"
      }
    }
  </script>
  
  <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "FAQPage",
      "mainEntity": [ {
        "@type": "Question",
        "name": "What is Vorel?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Vorel is a real-time FRC match schedule and results tracker that combines data from FIRST Nexus API and The Blue Alliance to provide comprehensive match information for FIRST Robotics Competition teams."
        }
      }, {
        "@type": "Question",
        "name": "How do I use Vorel?",
        "acceptedAnswer": {
          "@type": "Answer",
          "text": "Enter your team number and select an event to view your match schedule, results, and ranking information in real-time."
        }
      } ]
    }
  </script>
  
  <%- include('../partials/styles') %>
  <%- include('../style/style-home') %>
</head>
<body>
  <div class="main-content">
    <div class="hero">
      <div class="container">
        <img src="/banner.avif" alt="Vorel App Banner" class="hero-logo" />
        <h1 class="hero-title">FRC Match Schedule & Results Tracker</h1>
        <p class="hero-subtitle">
          The ultimate companion for FRC teams tracking competition journeys with real-time updates
        </p>
        
        <!-- Championship Event Notice -->
        <!-- <div class="championship-notice">
          <div class="notice-content">
            <h3>ðŸŽ‰ Championship Update ðŸŽ‰</h3>
            <p>Congratulations to all teams advancing to Championships! We've deployed a temporary workaround for championship division event keys between The Blue Alliance and FIRST Nexus. Your match schedules should now display correctly for all Championship events. </p>
            <p>We appreciate your patience and apologize for any inconvenience this might have caused!</p>
          </div>
        </div> -->
        
        <!-- Add a heading for the features section -->
        <h2 class="section-title">Key Features</h2>
        <div class="features">
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M13 2.05V5.08C16.39 5.57 19 8.47 19 12C19 15.87 15.87 19 12 19C8.47 19 5.57 16.39 5.08 13H2.05C2.55 17.94 6.81 22 12 22C17.51 22 22 17.51 22 12C22 6.81 17.94 2.55 13 2.05ZM12 7C9.24 7 7 9.24 7 12C7 14.76 9.24 17 12 17C14.76 17 17 14.76 17 12C17 9.24 14.76 7 12 7Z" fill="currentColor"/>
              </svg>
            </div>
            <h3 class="feature-title">Real-time Updates</h3>
            <p class="feature-description">Get live match updates directly from FIRST Nexus API as they happen.</p>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM9 17H7V10H9V17ZM13 17H11V7H13V17ZM17 17H15V13H17V17Z" fill="currentColor"/>
              </svg>
            </div>
            <h3 class="feature-title">Comprehensive Results</h3>
            <p class="feature-description">View detailed match results with alliance scoring breakdown.</p>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3ZM9 17H7V14H9V17ZM13 17H11V10H13V17ZM17 17H15V7H17V17Z" fill="currentColor"/>
              </svg>
            </div>
            <h3 class="feature-title">Team Rankings</h3>
            <p class="feature-description">Track team rankings and performance stats throughout the event.</p>
          </div>
          
          <div class="feature-card">
            <div class="feature-icon">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 3H3C1.9 3 1 3.9 1 5V19C1 20.1 1.9 21 3 21H21C22.1 21 23 20.1 23 19V5C23 3.9 22.1 3 21 3ZM21 19H3V5H21V19Z" fill="currentColor"/>
                <path d="M9 8H7V16H9V8Z" fill="currentColor"/>
                <path d="M17 8H15V12H17V8Z" fill="currentColor"/>
                <path d="M13 8H11V18H13V8Z" fill="currentColor"/>
              </svg>
            </div>
            <h3 class="feature-title">Embeddable Displays</h3>
            <p class="feature-description">Easily embed match information on team websites (documentation coming soon)</p>
          </div>
        </div>
        
        <div class="search-section">
          <h2 class="search-title">View Your Team's Matches</h2>
          
          <form method="get" action="/">
            <div class="form-row">
              <label for="teamKey">Team Number</label>
              <input type="text" name="teamKey" id="teamKey" placeholder="Enter team number (e.g., 1334 or frc1334)" />
              <span class="input-hint">Enter your team number with or without the "frc" prefix</span>
            </div>
            
            <div class="form-row">
              <label for="eventSearch">Event</label>
              <div class="search-container">
                <input type="text" name="eventSearch" id="eventSearch" placeholder="Search for an event (e.g., Ontario Provincial Championship)" autocomplete="off" />
                <input type="hidden" name="eventKey" id="eventKey" />
                <div class="search-results" id="searchResults"></div>
              </div>
              <span class="input-hint">Search for events by name, or event key (Note: Only 2025+ Events are valid)</span>
            </div>
            
            <button type="submit">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M15.5 14H14.71L14.43 13.73C15.41 12.59 16 11.11 16 9.5C16 5.91 13.09 3 9.5 3C5.91 3 3 5.91 3 9.5C3 13.09 5.91 16 9.5 16C11.11 16 12.59 15.41 13.73 14.43L14 14.71V15.5L19 20.49L20.49 19L15.5 14ZM9.5 14C7.01 14 5 11.99 5 9.5C5 7.01 7.01 5 9.5 5C11.99 5 14 7.01 14 9.5C14 11.99 11.99 14 9.5 14Z" fill="white"/>
              </svg>
              View Matches
            </button>
          </form>
        </div>
      </div>
    </div>
  </div>
  
  <footer class="footer">
    <div class="container">
      <img src="/banner2.avif" alt="Vorel App Presented By 1334 Banner" class="footer-logo" />
      <div class="footer-subtitle">FRC Match Schedule & Results Tracker</div>
      <div class="footer-info">Data provided by FIRST Nexus API & The Blue Alliance APIs</div>
      <div class="footer-copyright">Vorel App Â© 2025 â€¢ 
  <a href="https://github.com/1334Robotics/vorel-app">GitHub</a> â€¢ 
  <a href="https://vorel.app/changelog">Changelog</a>
</div>
    </div>
  </footer>
  
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const searchInput = document.getElementById('eventSearch');
      const eventKeyInput = document.getElementById('eventKey');
      const searchResults = document.getElementById('searchResults');
      
      let selectedIndex = -1;
      let searchTimeout;
      let events = [];
      
      const form = document.querySelector('form');

      form.addEventListener('submit', (e) => {
        const teamKeyInput = document.getElementById('teamKey');
        const eventSearchInput = document.getElementById('eventSearch');
        const eventKeyInput = document.getElementById('eventKey');
        
        eventSearchInput.removeAttribute('name');
        
        if (!teamKeyInput.value.trim()) {
          e.preventDefault();
          
          let teamErrorMsg = document.querySelector('.team-error');
          if (!teamErrorMsg) {
            teamErrorMsg = document.createElement('div');
            teamErrorMsg.className = 'team-error';
            teamErrorMsg.style.color = '#ff5252';
            teamErrorMsg.style.fontSize = '0.9em';
            teamErrorMsg.style.marginTop = '5px';
            teamErrorMsg.textContent = 'Please enter a team number';
            teamKeyInput.parentNode.appendChild(teamErrorMsg);
          }
          
          teamKeyInput.style.borderColor = '#ff5252';
        }
        
        if (eventSearchInput.value.trim() && !eventKeyInput.value.trim()) {
          e.preventDefault();
          
          let errorMsg = document.querySelector('.event-error');
          if (!errorMsg) {
            errorMsg = document.createElement('div');
            errorMsg.className = 'event-error';
            errorMsg.style.color = '#ff5252';
            errorMsg.style.fontSize = '0.9em';
            errorMsg.style.marginTop = '5px';
            errorMsg.textContent = 'Please select an event from the search results';
            eventSearchInput.parentNode.appendChild(errorMsg);
          }
          
          eventSearchInput.style.borderColor = '#ff5252';
        }
      });

      document.getElementById('teamKey').addEventListener('input', (e) => {
        e.target.style.borderColor = '';
        const errorMsg = document.querySelector('.team-error');
        if (errorMsg) errorMsg.remove();
      });

      searchInput.addEventListener('input', (e) => {
        const query = e.target.value.trim();
        
        eventKeyInput.value = '';
        
        searchInput.style.borderColor = '';
        const errorMsg = document.querySelector('.event-error');
        if (errorMsg) errorMsg.remove();
        
        clearTimeout(searchTimeout);
        
        if (query.length < 3) {
          searchResults.innerHTML = '';
          searchResults.classList.remove('active');
          return;
        }
        
        searchTimeout = setTimeout(() => {
          fetchEvents(query);
        }, 300);
      });
      
      searchInput.addEventListener('keydown', (e) => {
        if (!searchResults.classList.contains('active')) return;
        
        const items = searchResults.querySelectorAll('.search-item');
        
        if (e.key === 'ArrowDown') {
          e.preventDefault();
          selectedIndex = Math.min(selectedIndex + 1, items.length - 1);
          updateSelection(items);
        }
        
        if (e.key === 'ArrowUp') {
          e.preventDefault();
          selectedIndex = Math.max(selectedIndex - 1, -1);
          updateSelection(items);
        }
        
        if (e.key === 'Enter') {
          e.preventDefault();
          if (selectedIndex > -1 && selectedIndex < items.length) {
            items[selectedIndex].click();
          } else if (items.length > 0) {
            // Auto-select the first item if no item is selected
            selectedIndex = 0;
            updateSelection(items);
            items[0].click();
          }
        }
        
        if (e.key === 'Escape') {
          closeSearchResults();
        }
      });
      
      document.addEventListener('click', (e) => {
        if (!searchInput.contains(e.target) && !searchResults.contains(e.target)) {
          closeSearchResults();
        }
      });
      
      function updateSelection(items) {
        items.forEach((item, index) => {
          if (index === selectedIndex) {
            item.classList.add('selected');
            item.scrollIntoView({ block: 'nearest' });
          } else {
            item.classList.remove('selected');
          }
        });
      }
      
      function closeSearchResults() {
        searchResults.classList.remove('active');
        selectedIndex = -1;
      }
      
      function fetchEvents(query) {
        fetch(`/api/events/search?q=${encodeURIComponent(query)}`)
          .then(response => {
            if (!response.ok) {
              throw new Error(`API responded with status: ${response.status}`);
            }
            return response.json();
          })
          .then(data => {
            events = data;
            displayResults(events);
          })
          .catch(error => {
            console.error('Error searching events:', error);
            searchResults.innerHTML = '';
            
            const errorElement = document.createElement('div');
            errorElement.className = 'search-item';
            errorElement.style.color = '#ff5252';
            errorElement.textContent = 'Unable to fetch events. Please check your connection and try again.';
            searchResults.appendChild(errorElement);
            
            searchResults.classList.add('active');
          });
      }
      
      function displayResults(events) {
        searchResults.innerHTML = '';
        
        if (events.length === 0) {
          const noResults = document.createElement('div');
          noResults.className = 'search-item';
          noResults.textContent = 'No events found';
          searchResults.appendChild(noResults);
        } else {
          events.forEach(event => {
            const item = document.createElement('div');
            item.className = 'search-item';
            
            const nameDiv = document.createElement('div');
            nameDiv.className = 'event-name';
            nameDiv.textContent = event.name;
            
            const detailsDiv = document.createElement('div');
            detailsDiv.className = 'event-details';
            detailsDiv.textContent = `${event.location} â€¢ ${event.date}`;
            
            const keyDiv = document.createElement('div');
            keyDiv.className = 'event-key';
            keyDiv.textContent = `Event Key: ${event.key}`;
            
            item.appendChild(nameDiv);
            item.appendChild(detailsDiv);
            item.appendChild(keyDiv);
            
            item.addEventListener('click', () => {
              searchInput.value = event.name;
              eventKeyInput.value = event.key;
              closeSearchResults();
            });
            
            searchResults.appendChild(item);
          });
        }
        
        searchResults.classList.add('active');
        selectedIndex = -1;
      }
    });
  </script>
  <script>
  if ('serviceWorker' in navigator) {
    window.addEventListener('load', () => {
      navigator.serviceWorker.register('/service-worker.js')
        .then(registration => {
          console.log('Service Worker registered successfully:', registration.scope);
        })
        .catch(error => {
          console.log('Service Worker registration failed:', error);
        });
    });
  }
</script>
</body>
</html>